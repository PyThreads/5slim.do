# Usa una imagen ligera de Node 21 con npm
FROM node:21-slim

# Establece el directorio de trabajo dentro del contenedor
WORKDIR /app

# Copia solo los archivos necesarios del directorio api
COPY ./api/package*.json ./

# Instala dependencias solo de producci칩n si est치s en producci칩n

ENV DB_HOST=3.18.104.165
ENV DB_NAME=5SLIM-DO
ENV DB_USER=root
ENV DB_PASSWORD=root
ENV DB_PORT=27017

RUN npm install

# Copia el resto de la aplicaci칩n
COPY ./api .

# Comando por defecto para iniciar la app
CMD ["npm", "start"]